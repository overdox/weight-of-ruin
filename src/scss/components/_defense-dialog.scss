// Defense Dialog Styles
// Imported inside .wor.defense-dialog { } context
//
// NOTE: Base dark theme styling comes from _dark-theme-defaults.scss
// This file only contains defense-dialog-specific overrides and additions.

// Wrapper contains both header and content
.defense-dialog-wrapper {
  display: flex;
  flex-direction: column;
}

// Dialog title icon
.dialog-header .header-info .dialog-title::before {
  content: "\f3ed"; // shield-alt icon
  font-family: "Font Awesome 6 Free", FontAwesome;
  font-weight: 900;
  margin-right: $spacing-sm;
}

.defense-dialog-content {
  padding: $spacing-xl;
  max-height: 500px;
  overflow-y: auto;

  // Full Defense Banner
  .full-defense-banner {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $spacing-sm;
    padding: $spacing-sm $spacing-md;
    margin-bottom: $spacing-lg;
    background: linear-gradient(135deg, var(--wor-success) 0%, var(--wor-success-dark) 100%);
    color: #fff;
    border-radius: $border-radius-sm;
    font-weight: $font-weight-bold;
    box-shadow: $shadow-sm;

    i {
      font-size: $font-size-lg;
    }
  }

  // Buy option hint
  .buy-option-hint {
    margin: 0 0 $spacing-sm 0;
    font-size: $font-size-sm;
    color: rgba(255, 255, 255, 0.6);
    font-style: italic;
    text-align: center;
  }

  // Pool breakdown (matching Attack dialog style)
  .pool-breakdown {
    .pool-row {
      display: flex;
      justify-content: space-between;
      padding: $spacing-sm $spacing-xs;
      font-size: $font-size-base;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);

      &:last-child {
        border-bottom: none;
      }

      .pool-label {
        color: #fff;
        font-weight: $font-weight-normal;
      }

      .pool-value {
        font-weight: $font-weight-bold;
        color: $c-gold;
        font-size: $font-size-lg;
      }
    }
  }

  // Modifier row (matching Attack dialog style)
  .modifier-row {
    display: flex;
    align-items: center;
    gap: $spacing-md;
    margin-top: $spacing-md;
    padding: $spacing-md;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: $border-radius-sm;

    .modifier-label {
      font-size: $font-size-base;
      font-weight: $font-weight-bold;
      color: #fff;
    }

    .modifier-input {
      width: 70px;
      text-align: center;
      font-size: $font-size-base;
      font-weight: $font-weight-bold;
      background: rgba(0, 0, 0, 0.4) !important;
      border: 1px solid rgba($c-copper, 0.4) !important;
      color: #fff !important;
      border-radius: $border-radius-sm;
    }
  }

  // Buy options grid
  .buy-options-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: $spacing-sm;

    .buy-option {
      display: flex;
      flex-direction: column;
      gap: $spacing-xs;
      padding: $spacing-sm;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: $border-radius-sm;
      cursor: pointer;
      transition: all $transition-fast;

      &:hover:not(.unavailable) {
        border-color: rgba($c-copper, 0.6);
        background: rgba($c-copper, 0.15);
      }

      &.selected {
        border-color: $c-copper;
        background: rgba($c-copper, 0.2);
        box-shadow: 0 0 6px rgba($c-copper, 0.4);
      }

      &.unavailable {
        opacity: 0.5;
        cursor: not-allowed;
      }

      &.has-penalty {
        border-color: var(--wor-warning);

        &.selected {
          border-color: var(--wor-warning);
          background: rgba(216, 138, 56, 0.15);
          box-shadow: 0 0 6px rgba(216, 138, 56, 0.3);
        }
      }

      input[type="radio"] {
        display: none;
      }

      .option-content {
        display: flex;
        align-items: center;
        gap: $spacing-sm;

        .option-name {
          font-size: $font-size-base;
          color: #fff;
          flex: 1;
        }

        .option-bonus {
          font-weight: $font-weight-bold;
          font-size: $font-size-lg;
          color: $c-gold;

          &.penalized {
            color: var(--wor-warning);

            .penalty-indicator {
              font-size: $font-size-xs;
              font-weight: $font-weight-normal;
              color: rgba(255, 255, 255, 0.5);
              text-decoration: line-through;
              margin-left: $spacing-xs;
            }
          }
        }
      }

      .option-note {
        font-size: $font-size-sm;
        color: var(--wor-danger);
        font-style: italic;
      }

      .option-uses {
        font-size: $font-size-sm;
        color: var(--wor-warning);
        font-style: italic;
      }
    }
  }

  .buy-warning {
    display: flex;
    align-items: center;
    gap: $spacing-sm;
    margin-top: $spacing-sm;
    padding: $spacing-sm;
    background: rgba(196, 85, 85, 0.15);
    border: 1px solid rgba(196, 85, 85, 0.3);
    border-radius: $border-radius-sm;
    color: var(--wor-danger);
    font-size: $font-size-sm;
    font-style: italic;
  }

  // Fervor options
  .fervor-options {
    display: flex;
    flex-direction: column;
    gap: $spacing-xs;

    .fervor-option {
      display: flex;
      align-items: center;
      gap: $spacing-sm;
      padding: $spacing-sm;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: $border-radius-sm;
      cursor: pointer;
      transition: all $transition-fast;

      &:hover:not(.disabled) {
        border-color: rgba(154, 106, 186, 0.6);
        background: rgba(154, 106, 186, 0.15);
      }

      &.disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      input[type="checkbox"] {
        margin: 0;
        accent-color: var(--wor-magic);
      }

      .option-label {
        flex: 1;
        font-size: $font-size-base;
        color: #fff;
      }

      .option-cost {
        font-size: $font-size-base;
        color: rgba(255, 255, 255, 0.6);
        font-weight: $font-weight-bold;
      }
    }
  }

  // Zero pool warning
  .zero-pool-warning {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $spacing-sm;
    margin-top: $spacing-md;
    padding: $spacing-md;
    background: rgba(196, 85, 85, 0.15);
    border: 1px solid rgba(196, 85, 85, 0.3);
    border-radius: $border-radius-sm;
    color: var(--wor-danger);
    font-size: $font-size-sm;
  }
}

// Effective pool uses global .effective-pool-summary styling
// with zero-pool color override
.effective-pool-summary .pool-value.zero-pool {
  color: var(--wor-danger);
}

// Dialog footer buttons (match Attack dialog styling)
footer.dialog-footer,
.dialog-buttons {
  display: flex !important;
  gap: $spacing-md !important;
  padding: $spacing-lg !important;
  margin: $spacing-lg $spacing-xl $spacing-xl $spacing-xl !important;
  background: rgba(0, 0, 0, 0.3) !important;
  border-top: none !important;
  border-radius: $border-radius-md !important;
  justify-content: center !important;

  button {
    flex: 1 !important;
    min-width: 120px !important;
    padding: $spacing-md $spacing-lg !important;
    font-size: $font-size-base !important;
    font-weight: $font-weight-bold !important;
  }
}
